(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79077b26"],{"0b5c":function(t,e,a){},"22b1":function(t,e,a){"use strict";var i=a("0b5c"),s=a.n(i);s.a},c106:function(t,e,a){"use strict";a.r(e);var i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"rounded-corners-card-panel center padding-16 margin-16 relative"},[t.loading?a("div",{staticClass:"progress zero-margin zero-padding preloader-wrapper"},[a("div",{staticClass:"indeterminate"})]):t._e(),a("span",{staticClass:"font-size-large"},[t._v("Search")]),a("div",{staticClass:"row valign-wrapper zero-padding zero-margin-bottom margin-top-16"},[a("div",{staticClass:"input-field col s4 m4 l5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.lat,expression:"location.lat"}],staticClass:"active",attrs:{id:"latitude",type:"number",step:"any"},domProps:{value:t.location.lat},on:{input:function(e){e.target.composing||t.$set(t.location,"lat",e.target.value)}}}),a("label",{attrs:{for:"latitude"}},[t._v("Latitude")]),""!=t.laterror?a("span",{staticClass:"left left-align red-text font-size-little"},[t._v(t._s(t.laterror))]):t._e()]),a("div",{staticClass:"input-field col s4 m4 l5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.lng,expression:"location.lng"}],staticClass:"active",attrs:{id:"longitude",type:"number",step:"any"},domProps:{value:t.location.lng},on:{input:function(e){e.target.composing||t.$set(t.location,"lng",e.target.value)}}}),a("label",{attrs:{for:"longitude"}},[t._v("Longitude")]),""!=t.lngerror?a("span",{staticClass:"left left-align red-text font-size-little"},[t._v(t._s(t.lngerror))]):t._e()]),a("div",{staticClass:"col s4 m4 l2"},[a("a",{staticClass:"right white-text waves-effect btn-flat teal no-uppercase font-size-small form-btn",on:{click:t.toggleLocationPickerVisibility}},[t._v(t._s(t.locationPickerButtonText))])])]),a("div",{staticClass:"row zero-padding zero-margin"},[t.isPickLocationVisible?a("div",{staticClass:"col s12"},[a("location-picker",{model:{value:t.location,callback:function(e){t.location=e},expression:"location"}})],1):t._e()]),a("div",{staticClass:"row zero-padding zero-margin"},[a("div",{staticClass:"input-field col s6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchmaxdistancemetres,expression:"searchmaxdistancemetres"}],staticClass:"active",attrs:{id:"searchmaxdistancemetres",type:"number"},domProps:{value:t.searchmaxdistancemetres},on:{input:function(e){e.target.composing||(t.searchmaxdistancemetres=e.target.value)}}}),a("label",{attrs:{for:"searchmaxdistancemetres"}},[t._v("Search distance (in m)")]),""!=t.distanceerror?a("span",{staticClass:"left left-align red-text font-size-little"},[t._v(t._s(t.distanceerror))]):t._e()]),a("div",{staticClass:"input-field col s6"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.patientbloodgroup,expression:"patientbloodgroup"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.patientbloodgroup=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Choose your blood group")]),a("option",{attrs:{value:"A+"}},[t._v("A+")]),a("option",{attrs:{value:"A-"}},[t._v("A-")]),a("option",{attrs:{value:"B+"}},[t._v("B+")]),a("option",{attrs:{value:"B-"}},[t._v("B-")]),a("option",{attrs:{value:"AB+"}},[t._v("AB+")]),a("option",{attrs:{value:"AB-"}},[t._v("AB-")]),a("option",{attrs:{value:"O+"}},[t._v("O+")]),a("option",{attrs:{value:"O-"}},[t._v("O-")])]),a("label",[t._v("Patient blood group")]),""!=t.bloodgrouperror?a("span",{staticClass:"left left-align red-text font-size-little"},[t._v(t._s(t.bloodgrouperror))]):t._e()])]),a("div",{staticClass:"row zero-padding zero-margin"},[a("a",{staticClass:"btn-floating btn-large waves-effect waves-light",on:{click:t.search}},[a("i",{staticClass:"material-icons"},[t._v("search")])])])])]),0!=t.searchResults.length?a("div",{staticClass:"row"},[a("div",{staticClass:"row center"},[a("span",{staticClass:"font-size-large"},[t._v("Search Results ("+t._s(t.searchCount)+" results)")])]),t._l(t.searchResults,function(t){return a("SearchResult",{key:t.id,attrs:{result:t,where:"0"}})})],2):t._e()])},o=[],r=a("bd86"),n=a("59ad"),l=a.n(n),c=(a("55dd"),a("ddab")),d=a("78db"),u=(i={name:"Search",methods:{},created:function(){M.AutoInit()},data:function(){return{location:{lat:53.35014,lng:-6.266155},searchmaxdistancemetres:6e3,patientbloodgroup:"",isPickLocationVisible:!1,locationPickerButtonText:"Pick",loading:!1,searchResults:[],laterror:"",lngerror:"",distanceerror:"",bloodgrouperror:"",searchCount:0}},components:{LocationPicker:c["a"],SearchResult:d["a"]},computed:{loginLogoutText:function(){return localStorage.getItem("token")?"Logout":"Login"}}},Object(r["a"])(i,"methods",{toggleLocationPickerVisibility:function(){this.isPickLocationVisible=!this.isPickLocationVisible,this.isPickLocationVisible?this.locationPickerButtonText="Hide":this.locationPickerButtonText="Pick"},search:function(){var t=this,e=!1;if(""==this.location.lat&&(this.laterror="Latitude cannot be empty!",e=!0),""==this.location.lng&&(this.lngerror="Longitude cannot be empty!",e=!0),""==this.searchmaxdistancemetres&&(this.distanceerror="Distance cannot be empty!",e=!0),""==this.patientbloodgroup&&(this.bloodgrouperror="Select blood group!",e=!0),!e){this.loading=!0;var a={search_lat:this.location.lat,search_long:this.location.lng,search_max_distance_metres:this.searchmaxdistancemetres,blood_group_patient:this.patientbloodgroup};this.$store.dispatch("search",a).then(function(e){e.error?t.distanceerror=e.error_message:(t.searchResults=e.person_matches,t.searchResults.sort(function(t,e){return l()(t.distance_in_metres)-l()(e.distance_in_metres)}),t.searchResults=t.searchResults.slice(0,10),t.searchCount=e.no_of_matches),t.loading=!1})}}}),Object(r["a"])(i,"mounted",function(){M.AutoInit(),M.updateTextFields()}),i),p=u,v=(a("22b1"),a("2877")),g=Object(v["a"])(p,s,o,!1,null,"aef1e4f8",null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-79077b26.d5666fb5.js.map