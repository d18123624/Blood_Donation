(function(e){function t(t){for(var r,o,u=t[0],i=t[1],s=t[2],l=0,d=[];l<u.length;l++)o=u[l],a[o]&&d.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);h&&h(t);while(d.length)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a={app:0},c=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-26876445":"812b56f1","chunk-32b95c28":"46bd92e6","chunk-3edf7c7e":"1d728254","chunk-4e57bc88":"2b3c576b","chunk-728dd468":"8ea1d7d7","chunk-047cfa8e":"1b44cc42","chunk-79077b26":"d5666fb5","chunk-e78fac08":"1840b2b3"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-26876445":1,"chunk-32b95c28":1,"chunk-3edf7c7e":1,"chunk-4e57bc88":1,"chunk-728dd468":1,"chunk-047cfa8e":1,"chunk-79077b26":1,"chunk-e78fac08":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-26876445":"435f5b56","chunk-32b95c28":"da89d1bd","chunk-3edf7c7e":"eb0cab76","chunk-4e57bc88":"dd487021","chunk-728dd468":"ce6c0268","chunk-047cfa8e":"7eb93a42","chunk-79077b26":"acb41c8e","chunk-e78fac08":"3fa34803"}[e]+".css",a=i.p+r,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var s=c[u],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===a))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){s=d[u],l=s.getAttribute("data-href");if(l===r||l===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var r=t&&t.target&&t.target.src||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete o[e],h.parentNode.removeChild(h),n(c)},h.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(h)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=u(e),s=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");c.type=r,c.request=o,n[1](c)}a[e]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var h=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header"),n("router-view")],1)},a=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar-fixed"},[n("nav",{staticClass:"white"},[n("div",{staticClass:"nav-wrapper white margin-horizontal-16"},[n("router-link",{attrs:{to:"/"}},[n("a",{staticClass:"black-text font-size-huge"},[e._v("Blood donation")])]),n("ul",{staticClass:"right"},[n("li",[n("a",{staticClass:"black-text",on:{click:e.loginOrLogout}},[e._v("\n            "+e._s(e.loginLogoutText)+"\n          ")])])])],1)])])},u=[],i=n("bd86"),s=Object(i["a"])({name:"Header",methods:{},created:function(){M.AutoInit()},data:function(){return{}},computed:{loginLogoutText:function(){return this.$store.state.isloggedIn?"Logout":"Login"}}},"methods",{loginOrLogout:function(){var e=this;this.$store.state.isloggedIn?this.$store.dispatch("logout").then(function(t){try{M.toast({html:t.message}),e.$router.push("/")}catch(n){}}):this.$router.push("/signin")}}),l=s,d=n("2877"),h=Object(d["a"])(l,c,u,!1,null,"69c85d5c",null),f=h.exports,p={name:"app",components:{Header:f},created:function(){localStorage.getItem("token")&&this.$store.commit("setIsLoggedIn",{loggedin:!0,token:localStorage.getItem("token")})}},m=p,g=Object(d["a"])(m,o,a,!1,null,null,null),b=g.exports,v=n("a4bb"),k=n.n(v),w=(n("ac6a"),n("774e")),y=n.n(w),_=(n("7514"),n("8c4f")),x=function(){return n.e("chunk-e78fac08").then(n.bind(null,"57da"))},S=function(){return n.e("chunk-3edf7c7e").then(n.bind(null,"677f"))},I=function(){return n.e("chunk-4e57bc88").then(n.bind(null,"5ace"))},O=function(){return Promise.all([n.e("chunk-728dd468"),n.e("chunk-79077b26")]).then(n.bind(null,"c106"))},L=function(){return n.e("chunk-32b95c28").then(n.bind(null,"172d"))},R=function(){return Promise.all([n.e("chunk-728dd468"),n.e("chunk-047cfa8e")]).then(n.bind(null,"7ac1"))},T=function(){return n.e("chunk-26876445").then(n.bind(null,"de7d"))};r["a"].use(_["a"]);var j=new _["a"]({mode:"history",base:"/",routes:[{path:"/",component:x,name:"Home",meta:{title:"Home"}},{path:"/signup",component:I,name:"SignUp",meta:{title:"Sign up"}},{path:"/signin",component:S,name:"SignIn",meta:{title:"Sign In"}},{path:"/search",component:O,name:"Search",meta:{title:"Search"}},{path:"/previoussearches",component:R,name:"PreviousSearches",meta:{title:"Previous searches"}},{path:"/incomingrequests",component:T,name:"IncomingRequests",meta:{title:"Incoming requests"}},{path:"/location/:lat/:lon",component:L,name:"Location",meta:{title:"Location"}}]});j.beforeEach(function(e,t,n){var r=e.matched.slice().reverse().find(function(e){return e.meta&&e.meta.title}),o=e.matched.slice().reverse().find(function(e){return e.meta&&e.meta.metaTags});if(r&&(document.title=r.meta.title),y()(document.querySelectorAll("[data-vue-router-controlled]")).map(function(e){return e.parentNode.removeChild(e)}),!o)return n();o.meta.metaTags.map(function(e){var t=document.createElement("meta");return k()(e).forEach(function(n){t.setAttribute(n,e[n])}),t.setAttribute("data-vue-router-controlled",""),t}).forEach(function(e){return document.head.appendChild(e)}),n()});var C=j,E=n("2f62"),q={setIsLoggedIn:function(e,t){var n=t.loggedin,r=t.token;e.isloggedIn=n,n?localStorage.setItem("token",r):localStorage.removeItem("token")}},A=(n("96cf"),n("3b8d")),P=function(){return{login:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t,n){var o,a,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=t.state,a=t.commit,c={message:"",error:!0},e.next=4,r["a"].http.post(o.baseURL+"/person/login/",n,{"Content-Type":"application/x-www-form-urlencoded",emulateJSON:!0}).then(function(e){c.message=e.body.message,c.error=!1,a("setIsLoggedIn",{loggedin:!0,token:e.body.token})}).catch(function(e){c.message=e.body.non_field_errors[0],c.error=!0,a("setIsLoggedIn",{loggedin:!1,token:null})});case 4:return e.abrupt("return",c);case 5:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),signup:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t,n){var o,a,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=t.state,a=t.commit,c={message:"",error:!0,error_fields:[]},e.next=4,r["a"].http.post(o.baseURL+"/person/signup/",n,{"Content-Type":"application/x-www-form-urlencoded",emulateJSON:!0}).then(function(e){c.message=e.body.message,c.error=!1,c.error_fields=[],a("setIsLoggedIn",{loggedin:!0,token:e.body.token})}).catch(function(e){c.message="Error!",c.error=!0,c.error_fields=e.body.error_fields,a("setIsLoggedIn",{loggedin:!1,token:null})});case 4:return e.abrupt("return",c);case 5:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t){var n,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,o=t.commit,a={message:"",error:!0},e.next=4,r["a"].http.get(n.baseURL+"/person/logout/",{headers:{Authorization:"Token "+localStorage.getItem("token")}}).then(function(e){a.error=!1,a.message=e.body.message,o("setIsLoggedIn",{loggedin:!1,token:null})}).catch(function(e){a.message="Error!",a.error=!0});case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),search:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t,n){var o,a,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=t.state,a={person_matches:[],no_of_matches:0,error_message:"",error:!1},c={},localStorage.getItem("token")&&(c={Authorization:"Token "+localStorage.getItem("token")}),e.next=6,r["a"].http.post(o.baseURL+"/donation_requests/search/",n,{"Content-Type":"application/x-www-form-urlencoded",emulateJSON:!0,headers:c}).then(function(e){a.person_matches=e.body.person_matches,a.no_of_matches=e.body.no_of_matches,a.error=!1,a.error_message=""}).catch(function(e){a.person_matches=[],a.error=!0,a.no_of_matches=0,a.error_message=e.body.search_max_distance_metres[0]});case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),getPreviousSearches:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,o=[],e.next=4,r["a"].http.get(n.baseURL+"/donation_requests/get_own_searches/",{"Content-Type":"application/x-www-form-urlencoded",emulateJSON:!0,headers:{Authorization:"Token "+localStorage.getItem("token")}}).then(function(e){o=e.body}).catch(function(e){o=[]});case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),requestForBloodDonation:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t,n){var o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=t.state,a="",e.next=4,r["a"].http.post(o.baseURL+"/donation_requests/request_for_donation/",n,{"Content-Type":"application/x-www-form-urlencoded",emulateJSON:!0,headers:{Authorization:"Token "+localStorage.getItem("token")}}).then(function(e){a="Request registered successfully!"}).catch(function(e){a="Error!"});case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),getReceivedRequests:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,o=[],e.next=4,r["a"].http.get(n.baseURL+"/donation_requests/received_requests_own/",{"Content-Type":"application/x-www-form-urlencoded",emulateJSON:!0,headers:{Authorization:"Token "+localStorage.getItem("token")}}).then(function(e){e.body.forEach(function(e){o.push(e.person_donation_request)})}).catch(function(e){o=[]});case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}};r["a"].use(E["a"]);var N=new E["a"].Store({state:{baseURL:"http://blooddonorbackend.ddns.net:8000",isloggedIn:!1},mutations:q,actions:P()}),U=n("28dd");n("6d61");r["a"].config.productionTip=!1,r["a"].use(C),r["a"].use(U["a"]),new r["a"]({store:N,router:C,render:function(e){return e(b)}}).$mount("#app")},"6d61":function(e,t,n){}});
//# sourceMappingURL=app.a5e1c5d8.js.map